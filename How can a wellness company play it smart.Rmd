---
title: 'Case study: How can a wellness company play it smart?'
author: "Osman Mendoza Rosales"
date: "5/24/2022"
output: html_document
---

![BellaBeat](https://is1-ssl.mzstatic.com/image/thumb/Purple126/v4/e4/1c/67/e41c67b7-9b8c-8a10-a5bb-326161de5e09/AppIcon-0-0-1x_U007emarketing-0-0-0-8-0-0-sRGB-0-0-0-GLES2_U002c0-512MB-85-220-0-0.png/1200x630wa.png)

<style>
body {
text-align: justify}
</style>

```{r warning= FALSE, message=FALSE, echo= FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(lubridate)
library(ggplot2)
library(cowplot)
library(rdwd)
library(tsibble)
library(dplyr)
#p1 <- ggdraw() + draw_image("https://uspto.report/TM/97148005/mark.png", scale = 0.5)
#p2 <- ggdraw() + draw_image("https://miro.medium.com/max/1400/1*NsPQNprsO0ZeyAoOCi0hag.jpeg", scale = 0.5)
#plot_grid(p1, p2)
```
<div align="center">
  <font size="6"> *Introduction.* </font> 
  </div>
<div align="center">
   <font size="4"> *This is a Capstone Project for Google Data Analytics Professional Certification.* </font>
</div>

Bellabeat is a high-tech company that manufactures health-focused smart products. 
The company empowers women with knowledge about their own health and habits.

Since it was founded in 2013, Bellabeat has grown rapidly and quickly positioned 
itself as a tech-driven wellness company for women. One of the company founders 
wants to analyze smart device usage data in order to gain insight into how 
consumers use non-Bellabeat smart devices. 

I will focus on another similar company, Fitbit’s, and analyze its smart device data to gain
insight into how consumers are using their smart devices. 

The insights might help Bellabeat to know about trends in the use of 
smart devices and, help the marketing department to prepare new strategies 
which might end in new growth opportunities for the company. 

I will use the 6 phases of the analysis process (Ask, Prepare, Process, Analyze,
Share and Act) to fulfill the analysis.

# **Phase 1: Ask.**
  
#### 1. **Identify the business task:**
* Analyze smart devices usage data.
* Provide high-level recommendations for Bellabeat´s marketing strategy.

**Question to guide analysis. **

* ¿How Fitbit´s consumers are using their smart devices?
* ¿What the trends are in the use of the smart devices of Fitbit.?
* ¿How the insights can help marketing department of Bellabeat?

####  2.  **Consider key stakeholders.**
**Primary stakeholders:**

* Urška Sršen: Bellabeat’s cofounder and Chief Creative Officer.
* Sando Mur: Mathematician and Bellabeat’s cofounder; key member of the Bellabeat executive team.

**Secondary Stakeholders:**

* Bellabeat marketing analytics team.

#### 3. **Deliverable.**

To analyze Fitbit smart devices usage and, to find trends which will provide 
insights that shall be used as marketing strategy for Bellabeat.

# **Phases 2: Prepare.**
**1. Identify the data source:**

**Dataset:** The data set for this exercise is provided by 
[FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit)
which is a Creative Commons Public Domain, dataset made available through
[Mobius](https://www.kaggle.com/arashnic)): This Kaggle data set contains personal 
fitness tracker from thirty fitbit users. Thirty eligible Fitbit users consented 
to the submission of personal tracker data, including minute-level output for 
physical activity, heart rate, and sleep monitoring. It includes information 
about daily activity, steps, and heart rate that can be used to explore users’ 
habits. 

The time frame of the data set and also of the analysis is from April 12th 2016
to May 9th 2016.

**2. Determine the credibility of the data.**

The **¨ROCCC** system shall be used to determine the credibility and integrity 
of the data.

**Reliability:** The data is **not** reliable, there is no information about 
source of the data. There is no clue about the population and if the sample size 
is representative.

**originality:** It is **not** an original data set since it was generated by 
respondents to a distributed survey via Amazon Mechanical Turk between 
03.12.2016-05.12.2016. 

**Comprehensive:** It is **not** comprehensive, not enough information and 
the data might be biased, not sure if it was obtained randomly.

**Current:** It was gotten in 2016, which means is outdated.

**Cited:** No enough proof that it is credible.

**3. About data ethics aspects.**

The data set for this exercise is provided by 
[FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit)
which is a Creative Commons Public Domain, dataset made available through
[Mobius](https://www.kaggle.com/arashnic)).

It is opened source information and shall be used as part of the final capstone
project.

**5. About the data source.**

* I will use the data set dailyActivity_merged.csv and data set sleepDay_merged.csv
which have complete information to perform the analysis.
* There is the assumption that the distance is measured in Kilometers (KM).
* To convert from Kilometer to Miles:
1 mi = 1.60934Km.

# **Phases 3: Process.**

####### Installing requires packages.
* tidyverse for data processing.
* lubridate for processing data and times.
* ggplot2 for visualization.
* magrittr Supplies the pipe operator.
* janitor  For examining and cleaning dirty data
* tidyr help to create tidy data.
* simplify and expedite common tasks

```{r include = FALSE }
library(tidyverse)
library(lubridate)
library(ggplot2)
library(magrittr)
library(tidyr)
library(janitor)
```

####### Display working directory and set your working directory to simplify calls to data.

```{r }
getwd()
setwd("C:/Users/osman/Documents/Bellabeat")
```
####### Uploading data set.

```{r}
daily_activity <- read.csv("dailyActivity_merged.csv")
sleep_day <- read.csv("sleepDay_merged.csv")
```

####### Checking data set daily_activity: first six rows.

```{r}
head(daily_activity)
```

There are some columns with zeros.

####### Last six rows.

```{r}
tail(daily_activity)
```
There are some columns with zeros.

####### Dimensions of data frame.
```{r}
sapply(daily_activity, class)
```


####### Looking missing values.

```{r}
daily_activity[!complete.cases(daily_activity),]
```
####### Looking & removing missing values.
```{r}
names(which(colSums(is.na(daily_activity))>0))
```

####### Looking for duplicate values in daily_activity.
```{r}

nrow(daily_activity[duplicated(daily_activity),])
```



```{r}
ddaily_activity <- daily_activity %>% filter(TotalSteps !=0)
daily_activity <- daily_activity %>%  filter(TotalDistance !=0)
```



```{r}
View(daily_activity)
```

####### Checking data set sleepDay_merged: first six rows and last six rows.
```{r}
head(sleep_day)
tail(sleep_day)
```

####### Dimensions of data frame sleep_day.
```{r}
sapply(sleep_day, class)
```
####### Looking for missing values.
```{r}
names(which(colSums(is.na(sleep_day))>0))

```
####### Looking for missing values.
```{r}
nrow(sleep_day[duplicated(sleep_day),])
```
####### Deleting missing values.
```{r}
sleep_day <- unique(sleep_day)
```

####### Looking for missing values again.
```{r}
nrow(sleep_day[duplicated(sleep_day),])
```


```{r}
View(sleep_day)
```

```{r}
daily_activity_clean <- daily_activity
sleep_day_clean <- sleep_day
write.csv(daily_activity_clean, file = "c:/Users/osman/documents/Bellabeat/daily_activity_clean.csv")
write.csv(sleep_day_clean, file = "c:/Users/osman/documents/Bellabeat/sleep_day_clean.csv")
```

# **Phases 4 & 5: Analyse & Share.**

####### Merging the "DailiActivity" and "SleepDay" data sets.
```{r message=TRUE}
Complete_set <- merge(sleep_day_clean, daily_activity_clean, by="Id")
```

<div align="center">
#### Table1. Average information of **Total steps** & **Total distance** of users while using the APP.
###### From April 12th to May 9th 2016.
</div>


<div align="center">
```{r }
round(colMeans(Complete_set[ , 7:8]),2)
#colMeans(daily_activity[sapply(daily_activity, is.numeric)])
```
</div>

<div align="center">
#### *Table2. Fitbit: Average distance in Kilometers, performed by users* 
#### *classified by the level of activity.*
</div>

<div align="center">
###### From April 12th to May 9th 2016.
</div>

```{r include= FALSE }
round(colMeans(Complete_set[ ,11:14]),2)
```


<div align="center">
```{r}
distance <-  data.frame("classification" = c("very_active", "moderately_active", "light_active", "sedentary_active"), "distance" = c(1.47, 0.77, 3.72, 0))
distance
```


```{r message=FALSE}
dist_km <- ggplot(data = distance ,aes(x = reorder(classification, - distance), y = distance)) +
  geom_bar(stat = "identity", aes(fill = distance)) +
  labs( title = "Chart1
  Fitbit: Average physical activity (Km) performed by 
  smart devices users, classified by the level of activity.",
                subtitle = "From April 12th to May 9th, 2016.", 
                caption = "Coursera capstone project for: Google Data Analytics Professional Certificate."
                  ) +
                    theme(plot.title = element_text(hjust =  0.5),
                    plot.subtitle = element_text(hjust =  0.5)) + 
                    theme(panel.background = element_rect(fill = "#CCE5FF")) +
                      geom_text(aes(label = round(distance, digits =2)),
                    colour = "black", size = 3,
                    vjust = -0.5, position = position_dodge(.9))
dist_km
```


```{r include=FALSE}
round(colMeans(Complete_set[ , 15:18]),2)

```

#### *Table3. Fitbit: Average consume of calories by the users while using the APP.*
<div align="center">
###### From April 12th to May 9th 2016.
</div>

```{r}
round(mean(Complete_set$Calories),2)
```
<div align="center">

#### *Table4. Fitbit: Physical activity in minutes performed by users,* 
#### *classified by the level of activity.*
###### From April 12th to May 9th, 2016.
</div>


<div align="center">
```{r}
table <-  data.frame("classification" = c("very_active", "fairly_active", "lightly_active", "sedentary"),
                     "minutes" = c(25.19, 18.25, 210.31, 768.27))
table
```
</div>



```{r }
db_minute <- ggplot(data = table ,aes(x = reorder(classification, - minutes), y = minutes)) +
  geom_bar(stat = "identity", aes(fill = minutes)) +
  labs( title = "Chart2
  Fitbit: Physical activity in minutes performed by users 
  classified by the level of activity.",
                subtitle = "From April 12th to May 9th, 2016.", 
                caption = "Coursera capstone project for: Google Data Analytics Professional Certificate."
                  ) +
                    theme(plot.title = element_text(hjust =  0.5),
                    plot.subtitle = element_text(hjust =  0.5)) + 
                    theme(panel.background = element_rect(fill = "#CCE5FF")) +
                      geom_text(aes(label = round(minutes, digits =0)),
                    colour = "black", size = 3,
                    vjust = -0.5, position = position_dodge(.9))
db_minute
```

```{r message = FALSE}
ggplot(data=Complete_set) +
  geom_point(mapping=aes(x=SedentaryMinutes, y= Calories, color= "orange")) +
  geom_smooth(mapping=aes(x=SedentaryMinutes, y= Calories)) +
  labs(title="Chart3
  Fitbit: Relation between Sedentary Minutes and calories 
       burned while using the APP. ", x="Sedentary (Minutes)", y="Calories",
        subtitle = "From April 12th to May 9th, 2016.",
                caption = "Coursera capstone project for: Google Data Analytics Professional Certificate.") +
                theme(plot.title = element_text(hjust = 0.5)) +
                theme(plot.subtitle = element_text(hjust = 0.5)) +
  theme(panel.background = element_rect(fill = "#ccffff"))
```

```{r message=FALSE}
ggplot(data=Complete_set) +
  geom_point(mapping=aes(x=TotalSteps, y= Calories, color= "orange")) +
  geom_smooth(mapping=aes(x=TotalSteps, y= Calories)) +
  labs(title="Chart4
  Fitbit: Relation between total steps performed and calories 
       burned while using the APP. ", x="Total steps", y="Calories",
        subtitle = "From April 12th to May 9th, 2016.",
                caption = "Coursera capstone project for: Google Data Analytics Professional Certificate.") +
                theme(plot.title = element_text(hjust = 0.5)) +
                theme(plot.subtitle = element_text(hjust = 0.5)) +
  theme(panel.background = element_rect(fill = "#ccffff"))
```


```{r message= FALSE}
ggplot(Complete_set) +
  geom_point(mapping=aes(x=TotalDistance, y= Calories, color= "orange")) +
  geom_smooth(mapping=aes(x=TotalDistance, y= Calories)) +
  labs(title="Chart5
  Fitbit: Relation between total distance traveled and calories 
       burned while using the APP. ", x="Total distance (Km)", y="Calories",
        subtitle = "From April 12th to May 9th, 2016.",
                caption = "Coursera capstone project for: Google Data Analytics Professional Certificate.") +
                theme(plot.title = element_text(hjust = 0.5)) +
                theme(plot.subtitle = element_text(hjust = 0.5)) +
  theme(panel.background = element_rect(fill = "#ccffff"))
```

```{r message=FALSE}
ggplot(data=Complete_set, mapping=aes(x=TotalMinutesAsleep, y=TotalTimeInBed), color="purple") +
  geom_point() +
  geom_smooth() +
  labs(title="Chart6
  Fitbit: Relation Between total minutes asleep and total minutes 
       in bed while using the APP. ", x="Total minutes asleep", y="Total time in Bed (min)",
        subtitle = "From April 12th to May 9th, 2016.",
                caption = "Coursera capstone project for: Google Data Analytics Professional Certificate.") +
                theme(plot.title = element_text(hjust = 0.5)) +
                theme(plot.subtitle = element_text(hjust = 0.5)) +
  theme(panel.background = element_rect(fill = "#ccffff"))
```

### **Findings from the analysis.**

<div style="text-align: justify">
Base on the information provided and after credibility was determined by using 
the ROCCC, the following are some insights from the data.

**1. Chart1.**

* Chart1 provides the average distance traveled in kilometers by the users of Fitbit smart 
devices and classified by Very active distance, moderately active distance,
light active distance and sedentary active distance.
* When the APP detected that users were in **lightly active**, they traveled 3.64 Km as average, 
1.64 Km when users were **very active**, 0.62 Km when users were **moderately active** and 0 Km in **sedentary** mode.
* While using the APP, the average distance traveled was only 3.64 when users were lightly active.
* Information was captured from April 12th to May 9th 2016.

**2. Chart2.**

* Chart 2 shows physical activity in minutes performed and captured by
Fitbit smart devices and classified by the level of activity from April 12th to
May 9th 2016.
* Fitbit smart devices´s users performed low physical activity.
* It shows that most of the time was consumed in **sedentary** activities (955 minutes).
* Then, lightly active activity was performed (210 minutes), very active (25 minutes) and 
fairly active (18 minutes).

**3. Chart3.**

* It shows relation between the sedentary activity of users and the calories 
consumed.
* While user is in sedentary ¨mode¨, there is an increase of calories burned 
until the user reaches 500 minutes.
* From 500 minutes to around 1100 minutes, there is no kind of pattern,
Calories consumed are very scattered, there is no relation between minutes and 
calories consumed.

* From around 1100 minutes to 1500, there is a negative relation between 
minutes consumed by users and calories burned.

**4. Chart4.**

* It indicates relation between total steps performed by users and 
calories burned while using the APP.
* Even though the data is very sparse, there is a positive correlation tendency.
* Calories tend to increase while more steps are performed by the users.

**5. Chart5.**

* It indicates relation between total distanced traveled in Km by the users 
and calories burned while using the APP.
* There is a positive correlation tendency.
* Calories tend to increase while more distance is traveled.

**6. Chart6.**

* It indicates the relation between total minutes asleep and total minutes 
in bed while using the APP.
* There is a positive correlation tendency.
* The most the users are asleep, there is a direct relation the more time the 
users are in bed.

<div align="justify">
# **Phases 6: Act.**
</div>

### **Conclusions.**

<div align="justify">
* After the data about Fitbit smart devices usage was analyzed, from April 12th 
to May 9th 2016, it is conclude that:

  * Users buy smart devices, however and certainly, do not use those devices to 
perform physical activities.
  * In that period of time, the users only performed 3.64 Km when the smart device 
detected physical activity as **light active mode.**
  * Fitbit smart devices´s users performed low activity.
  * The level of activity detected by the APP with more minutes was **sedentary** (768 minutes).
  * There is a positive correlation between steps performed by users 
and the calories burned.
  * Also, there is a positive correlation between distance traveled
 by users and calories burned.
</div>

### **Recommendations.**

<div align="justify">
* Bellabeat marketing should create a strategy to sell the idea that the main goal 
of buying its smart devices is to increase physical activities and to improve health conditions
and not only buying a device.
* That strategy should award users with credits, discounts, cash-back, etc. to 
women that really uses the smart devices to increase physical activity.
* Collecting and analysis data every period of time to see if the strategy has 
worked out and if it has helped the company to growth.
* Also, to keep performing analysis on smart devices competitors to see how 
they are performing.
</div>


